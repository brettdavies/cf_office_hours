# Change Log

| Change | Date | Version | Description | Author |
|--------|------|---------|-------------|--------|
| Initial Draft | 2025-10-01 | 1.0 | Created technical PRD with project context, complete requirements, and architecture decisions | John (PM Agent) |
| Technical Refinements | 2025-10-01 | 1.1 | Added: users/user_profiles table split, user_tags audit fields, centralized error handling, centralized utilities, minimal monitoring approach, Vitest testing strategy | John (PM Agent) |
| Consistency Check & Fixes | 2025-10-01 | 1.2 | Renumbered FRs sequentially (FR1-FR102), added missing requirements (avatar management, taxonomy storage, preset locations, calendar disconnect, reminder preferences), clarified dormant vs deactivated users, updated schema (actual_duration_minutes, reminder_preference, avatar fields, taxonomy table, tier_override_tokens), added approve link token documentation | John (PM Agent) |
| Internal Consistency Audit | 2025-10-01 | 1.3 | Schema updates: taxonomy approval workflow (source, is_approved, requested_by, approved_by fields), user_tags admin source type, avatar_metadata JSONB, tier_override_requests scope/expiration, calendar_integrations one-per-user constraint, notification_type tag_approval_pending. Clarified: FR62/FR63 meeting duration (nullable for in-person), FR57 dormant users (no scheduled meetings), NFR31 webhook sync/async split, NFR34 openapi-typescript for frontend types. Added: INotificationProvider.sendTagApprovalNotification, email template specifications, avatars storage bucket, data seeding section | John (PM Agent) |
| Post-Review Updates | 2025-10-01 | 1.4 | **SCOPE CHANGE:** Calendar sync now mandatory for all users (FR105-FR107). Consolidated FR19/FR31 (mentor reach-out with auto-exception). Updated FR11 (manual tags only for MVP, defer AI to post-MVP). Clarified FR62/FR63 (meeting duration fetched 1hr after end, best-effort). Updated NFR5/NFR28 (scoped realtime subscriptions). Schema: tier_override_requests.expires_at now required (7-day expiration), bookings.actual_duration_minutes clarified. API: Added /taxonomy endpoints (GET /, GET /pending, PUT /:id/approve, PUT /:id/reject). Google Meet link logic: prefer mentee's Google account, fallback to mentor, manual link for Outlook-only meetings. Reputation: added probationary clamp logic (isProbationary flag). Section 4.10: Added complete Airtable field mapping documentation | John (PM Agent) |
| OAuth Flow Simplification | 2025-10-01 | 1.5 | **UX IMPROVEMENT:** OAuth signup (Google/Microsoft) now requests both auth + calendar permissions in single combined flow (FR2, FR108). Magic link users see dismissible banner, prompted for calendar only when attempting booking/availability actions (action-level blocking per FR105). Coordinators exempt from calendar requirement. Schema: calendar_integrations.connection_method added (oauth_signup vs post_login). UI: Updated authentication flow screens with OAuth scope details, calendar connection banner/modal, action-level blocking. UX flows updated to reflect OAuth auto-connection and just-in-time prompts for magic link users. API: Documented combined OAuth flow and post-login calendar connection. Section 3.3: Added calendar permission scopes, action-level blocking requirements | John (PM Agent) |
| Internal Consistency Resolution | 2025-10-01 | 1.6 | **CONSISTENCY FIXES:** Clarified coordinator calendar exemption in schema documentation (application-level enforcement). Expanded FR93 with calendar disconnection behavior (warning on active bookings, manual cleanup responsibility, email notifications continue). Updated tier override expiration logic: approved overrides expire 7 days after approval (not creation), mentor-initiated overrides auto-approved. Updated FR54 to reflect new expiration model. FR107 clarified: tag approval notifications use delivery_channel='both'. FR57 expanded: dormant status is user-wide (90+ days no meetings in any role), tracked via users.last_activity_at. **SCOPE REDUCTION:** Removed meeting duration tracking from MVP (FR62/FR63 simplified, bookings.actual_duration_minutes removed, moved to FE12). API: Added POST /mentors/:mentorId/send-interest with auto-approval logic for tier-restricted mentor-initiated requests. UI: Added SlotPicker realtime subscription implementation example (scoped per NFR28) | John (PM Agent) |
| Epic & Story Structure | 2025-10-02 | 1.7 | **SECTION COMPLETE:** Added comprehensive Section 5 (Epic and Story Structure) with 9 epics, 78 user stories, acceptance criteria, priority levels, dependencies, sprint breakdown, and 18-week estimated timeline. Status: PRD now 100% complete and ready for epic/story generation. All requirements mapped to implementable stories with clear dependencies and acceptance criteria | John (PM Agent) |
| Walking Skeleton Restructure | 2025-10-02 | 2.0 | **MAJOR RESTRUCTURE:** Reorganized all epics using Walking Skeleton approach for faster time-to-value. Added Epic 0 (18 stories) delivering end-to-end working product by Week 4. Mock data seeding replaces Airtable dependency for initial development. Resequenced Epics 1-8 to iteratively add depth (infrastructure, OAuth, calendar, advanced booking, Airtable sync, matching, reputation, admin). Total: 86 stories across 10 sprints (20 weeks). Key improvement: working product in 4 weeks vs. 12 weeks, enabling early user feedback and risk mitigation. All stories renumbered (SKEL-*, INFRA-*, AUTH-*, PROFILE-*, CAL-*, AVAIL-*, BOOK-*, AIRTABLE-*, MATCH-*, REP-*, ADMIN-*) | John (PM Agent) |

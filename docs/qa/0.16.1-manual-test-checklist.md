# Story 0.16.1: Manual Test Checklist

**Story**: Manual Pre-Deployment Testing & Logging Enhancement
**Tester**: _(Name of person conducting tests)_
**Date**: _(Date tests were executed)_
**Environment**: Local Development

---

## Test Execution Instructions

1. For each test case below, execute the steps listed
2. Record the **Actual Result** observed
3. Mark **Status** as PASS or FAIL
4. If FAIL, add notes describing what went wrong
5. Check console logs to verify logging is working as expected

---

## Authentication Flow

### Test 1: Magic Link Send
- **Steps**: Go to `/auth/login`, enter valid email, click "Send Magic Link"
- **Expected**: Toast "Check your email", console log `[AUTH] Magic link sent { email, redirectUrl }`
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 2: Magic Link Redirect (CRITICAL - tests bug fix)
- **Steps**: Check Supabase mailbox (Inbucket), click magic link
- **Expected**:
  - Redirected to `/auth/callback`, then `/dashboard` (NOT `/auth/login`)
  - Expected Console Logs:
    - `[AUTH] onAuthStateChange`
    - `[AUTH] Setting session`
    - `[AUTH] User authenticated, redirecting to: /dashboard`
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 3: Magic Link Flow (Email 2)
- **Steps**: Repeat Test 2 with different email
- **Expected**: Same as Test 2
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 4: Magic Link Flow (Email 3)
- **Steps**: Repeat Test 2 with different email
- **Expected**: Same as Test 2
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 5: Session Persistence
- **Steps**: After login, refresh page
- **Expected**: User remains logged in, redirected to dashboard
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 6: Logout
- **Steps**: Click logout button in navigation
- **Expected**: Redirected to `/auth/login`, console log `[AUTH] Signing out`
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

## Profile Management

### Test 7: View Own Profile
- **Steps**: Navigate to `/profile`
- **Expected**: Profile page loads, shows current user name/email/bio
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 8: Edit Profile (Valid Data)
- **Steps**: Edit name and bio, click "Save"
- **Expected**: Success toast, console log `[PROFILE] Profile updated`, data persists on refresh
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 9: Edit Profile (Empty Name)
- **Steps**: Clear name field, click "Save"
- **Expected**: Validation error, no API call
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

## Availability Management (Mentor)

### Test 10: Create Availability Block
- **Steps**: Navigate to `/availability`, fill form (date, start/end time, slot duration, location), submit
- **Expected**: Success toast, console logs `[AVAILABILITY] Block created { date, slotCount }`, availability appears in list
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 11: View My Availability
- **Steps**: After creating availability, check "My Availability" list
- **Expected**: Created availability block appears with correct details (date, time, location, slots)
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

## Mentor Discovery & Booking (Mentee)

### Test 12: Browse Mentors
- **Steps**: Navigate to `/mentors`
- **Expected**: Grid of mentor cards displays, console log shows API request
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 13: View Mentor Profile
- **Steps**: Click "View Profile" on a mentor card
- **Expected**: Navigate to `/mentors/:id`, profile page shows mentor details and available slots
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 14: Select Slot
- **Steps**: On mentor profile, click an available slot button
- **Expected**: Booking modal opens, console log `[BOOKING] Slot selected { slotId, available: true }`
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 15: Book Meeting (Valid Data)
- **Steps**: Fill meeting goal (20+ chars), click "Confirm Booking"
- **Expected**: Success toast, console logs `[BOOKING] Booking created { bookingId }`, modal closes, slot marked booked
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 16: Book Meeting (Invalid Goal - Too Short)
- **Steps**: Fill meeting goal (5 chars), click "Confirm Booking"
- **Expected**: Validation error, no API call
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 17: Attempt Booking Already-Taken Slot
- **Steps**: Try to book a slot that was just booked (use two browser tabs if needed)
- **Expected**: Error toast "Slot already booked", console log `[API] 409 Conflict`
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

## Bookings Dashboard

### Test 18: View My Bookings (Mentee)
- **Steps**: Navigate to `/dashboard` (or bookings page if separate)
- **Expected**: Created booking appears in list with mentor name, date/time, location, meeting goal
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 19: View My Bookings (Mentor)
- **Steps**: Login as mentor, navigate to bookings dashboard
- **Expected**: Bookings where user is mentor appear with mentee name, date/time, location, meeting goal
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

## Email Notifications

### Test 20: Booking Confirmation Email (Mentee)
- **Steps**: After booking, check Supabase mailbox (Inbucket) for mentee email
- **Expected**: Email received with booking details (mentor name, date/time, location, meeting goal)
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 21: Booking Confirmation Email (Mentor)
- **Steps**: Check Supabase mailbox for mentor email
- **Expected**: Email received with booking details (mentee name, date/time, location, meeting goal)
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

## Edge Cases & Error Handling

### Test 22: Direct Navigation While Logged Out
- **Steps**: Log out, navigate directly to `/dashboard`
- **Expected**: Redirected to `/auth/login`, console log shows ProtectedRoute redirect
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 23: Browser Back Button After Login
- **Steps**: Login, navigate to profile, click browser back button
- **Expected**: Navigate to previous page (not logout or login page)
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 24: Console Errors Check
- **Steps**: Review browser console logs during all tests above
- **Expected**: No uncaught errors, no React warnings (hydration, key props, etc.)
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

## Email Whitelist Validation

### Test 25: New Whitelisted User Signup
- **Steps**: Sign up with email that exists in raw_mentees, raw_mentors, or raw_users
- **Expected**:
  - Magic link sent successfully
  - User created in auth.users and public.users
  - Correct role assigned from whitelist
  - User can access dashboard
  - API middleware allows access (200 responses)
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 26: Non-Whitelisted User Blocked
- **Steps**: Attempt to sign up with email NOT in any raw tables
- **Expected**:
  - No magic link sent (blocked before Supabase Auth call)
  - No auth.users record created
  - No public.users record created
  - Error message shown to user
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 27: Existing Whitelisted User Login
- **Steps**: Log in with existing user who is in whitelist
- **Expected**:
  - Magic link sent
  - User can authenticate and access dashboard
  - API middleware validates whitelist (200 responses)
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

### Test 28: User Removed from Whitelist (Active Session)
- **Steps**:
  1. User is logged in with active session
  2. Remove user's email from all raw tables (raw_mentees/raw_mentors/raw_users)
  3. User clicks any navigation button or makes API call
- **Expected**:
  - API returns 403 Forbidden
  - Console log: `[AUTH] API call failed, signing out`
  - User immediately signed out
  - Redirected to login page
  - No fallback to default role
- **Actual**:
- **Status**: ☐ PASS  ☐ FAIL
- **Notes**:

---

## Test Summary

**Total Tests**: 28
**Passed**: ___
**Failed**: ___
**Blocked**: ___

**Critical Issues Found**:

**Notes**:
